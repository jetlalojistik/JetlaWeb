<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://maps.googleapis.com https://cdnjs.cloudflare.com https://fonts.googleapis.com https://script.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src 'self' data: https:; connect-src 'self' https://maps.googleapis.com https://script.google.com https://script.googleusercontent.com; frame-src 'self' https://www.google.com https://script.google.com https://script.googleusercontent.com; object-src 'none'; base-uri 'self';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    
    <title>Jetla Dokümanlar</title>
    <script src="config.js"></script>
    <style>
        :root {
            --primary-red: #DC2626;
            --primary-red-dark: #B91C1C;
            --secondary-white: #FFFFFF;
            --background-white: #FAFAFA;
            --text-dark: #1F2937;
            --text-light: #6B7280;
            --light-gray: #F3F4F6;
            --border-color: #D1D5DB;
            --error-red: #EF4444;
            --success-green: #10B981;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--background-white);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background-color: var(--secondary-white);
            padding: 15px 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.25rem;
            color: var(--primary-red);
            font-weight: 600;
            text-align: center;
        }

        .container {
            flex: 1;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
        }

        .card {
            background-color: var(--secondary-white);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        label.required::after {
            content: " *";
            color: var(--primary-red);
        }

        input[type="text"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            background-color: var(--secondary-white);
            color: var(--text-dark);
            transition: border-color 0.2s;
        }

        input[type="text"]:focus,
        input[type="tel"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary-red);
        }

        input[type="file"] {
            width: 100%;
            padding: 12px;
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            background-color: var(--background-white);
            cursor: pointer;
            transition: all 0.2s;
        }

        input[type="file"]:hover {
            border-color: var(--primary-red);
            background-color: var(--light-gray);
        }

        input[type="file"]:focus {
            outline: none;
            border-color: var(--primary-red);
        }

        .file-preview {
            margin-top: 8px;
            padding: 8px;
            background-color: var(--light-gray);
            border-radius: 6px;
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .file-preview img {
            max-width: 100%;
            max-height: 150px;
            border-radius: 4px;
            margin-top: 8px;
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--secondary-white);
        }

        .checkbox-group input[type="checkbox"] {
            margin-top: 3px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .checkbox-group input[type="checkbox"]:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            font-weight: 400;
            flex: 1;
        }

        .checkbox-group:has(input:checked) {
            border-color: var(--primary-red);
        }

        .kvkk-link {
            color: var(--primary-red);
            text-decoration: underline;
            cursor: pointer;
            font-weight: 500;
        }

        .kvkk-link:hover {
            color: var(--primary-red-dark);
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background-color: var(--secondary-white);
            border-radius: 12px;
            padding: 24px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-gray);
        }

        .modal-header h2 {
            color: var(--primary-red);
            font-size: 1.5rem;
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-light);
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background-color: var(--light-gray);
            color: var(--text-dark);
        }

        .modal-content {
            color: var(--text-dark);
            line-height: 1.8;
        }

        .modal-content h3 {
            color: var(--primary-red);
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .modal-content h3:first-child {
            margin-top: 0;
        }

        .modal-content p {
            margin-bottom: 15px;
        }

        .modal-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .modal-content li {
            margin-bottom: 8px;
        }

        .modal-content strong {
            font-weight: 600;
        }

        .modal-button-group {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid var(--light-gray);
        }

        .modal-button-group .btn {
            width: 100%;
        }

        .modal-close-disabled {
            opacity: 0.5;
            cursor: not-allowed !important;
        }

        .modal-close-disabled:hover {
            background-color: transparent !important;
        }

        @media (max-width: 768px) {
            .modal {
                padding: 20px;
                max-height: 85vh;
            }

            .modal-header h2 {
                font-size: 1.3rem;
            }

            .modal-content {
                font-size: 0.95rem;
            }
        }

        .btn {
            width: 100%;
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .btn-primary {
            background-color: var(--primary-red);
            color: var(--secondary-white);
        }

        .btn-primary:hover:not(:disabled) {
            background-color: var(--primary-red-dark);
        }

        .btn-primary:active:not(:disabled) {
            transform: scale(0.98);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-secondary {
            background-color: var(--light-gray);
            color: var(--text-dark);
        }

        .btn-secondary:hover {
            background-color: var(--border-color);
        }

        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 12px;
        }

        .btn-group .btn {
            flex: 1;
        }

        .error-message {
            background-color: #FEE2E2;
            color: var(--error-red);
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            display: none;
        }

        .error-message.active {
            display: block;
        }


        .success-screen {
            text-align: center;
        }

        .success-icon {
            width: 64px;
            height: 64px;
            background-color: var(--success-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: var(--secondary-white);
            font-size: 2rem;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: var(--text-light);
            font-size: 0.75rem;
        }

        /* Mobil First - Responsive Tasarım */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                max-width: 100%;
            }

            .card {
                padding: 20px 16px;
                margin-bottom: 15px;
            }

            .header {
                padding: 12px 15px;
            }

            .header h1 {
                font-size: 1.1rem;
            }

            .form-group {
                margin-bottom: 18px;
            }

            input[type="text"],
            input[type="tel"],
            select,
            textarea {
                padding: 14px 16px;
                font-size: 16px; /* iOS zoom önleme */
            }

            .btn {
                padding: 16px 24px;
                font-size: 1rem;
                min-height: 48px; /* Büyük dokunma alanı */
            }

            .btn-group {
                flex-direction: column;
                gap: 10px;
            }

            .btn-group .btn {
                width: 100%;
            }

        }

        @media (max-width: 480px) {
            .container {
                padding: 12px;
            }

            .card {
                padding: 18px 14px;
            }

            .header {
                padding: 10px 12px;
            }

            .header h1 {
                font-size: 1rem;
            }

            input[type="text"],
            input[type="tel"],
            select,
            textarea {
                padding: 12px 14px;
            }
        }

        @media (max-width: 360px) {
            .card {
                padding: 16px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Jetla Dokümanlar</h1>
    </div>

    <div class="container">
        <!-- Form Screen -->
        <div id="formScreen" class="screen active">
            <div id="formError" class="error-message"></div>
            
            <div class="card">
                <div class="form-group">
                    <label for="adSoyad" class="required">Ad Soyad</label>
                    <input 
                        type="text" 
                        id="adSoyad" 
                        placeholder="Örn: Ahmet Yılmaz"
                        autocomplete="name"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="telefon" class="required">Telefon Numarası</label>
                    <input 
                        type="tel" 
                        id="telefon" 
                        placeholder="5XXXXXXXXX (0 olmadan)"
                        pattern="[5][0-9]{9}"
                        inputmode="numeric"
                        maxlength="10"
                        required
                    >
                    <small style="color: var(--text-light); font-size: 0.85rem; margin-top: 4px; display: block;">
                        Başında 0 olmadan giriniz (örn: 5449495008)
                    </small>
                </div>

                <div class="form-group">
                    <label for="acilTelefon" class="required">Acil Durumlar İçin 1. Derece Yakın Telefon Numarası</label>
                    <input 
                        type="tel" 
                        id="acilTelefon" 
                        placeholder="5XXXXXXXXX (0 olmadan)"
                        pattern="[5][0-9]{9}"
                        inputmode="numeric"
                        maxlength="10"
                        required
                    >
                    <small style="color: var(--text-light); font-size: 0.85rem; margin-top: 4px; display: block;">
                        Başında 0 olmadan giriniz (örn: 5449495008)
                    </small>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input 
                            type="checkbox" 
                            id="kvkkOnay" 
                            required
                            disabled
                        >
                        <label for="kvkkOnay" class="required" onclick="event.preventDefault(); openKVKKModal();" style="cursor: pointer;">
                            <a href="#" class="kvkk-link" onclick="event.preventDefault(); openKVKKModal();">KVKK Aydınlatma Metni</a>'ni okudum, anladım ve kabul ediyorum.
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input 
                            type="checkbox" 
                            id="sozlesmeOnay" 
                            required
                            disabled
                            onclick="event.preventDefault(); openSozlesmeModal();"
                        >
                        <label for="sozlesmeOnay" class="required" onclick="event.preventDefault(); openSozlesmeModal();" style="cursor: pointer;">
                            <a href="#" class="kvkk-link" onclick="event.preventDefault(); openSozlesmeModal();">Kurye Hizmet Sözleşmesi</a>'ni okudum, anladım ve kabul ediyorum.
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="dosyaYukle" class="required">Doküman Yükle</label>
                    <input 
                        type="file" 
                        id="dosyaYukle" 
                        accept=".pdf,.jpg,.jpeg,.png,.doc,.docx"
                        required
                        multiple
                    >
                    <small style="color: var(--text-light); font-size: 0.85rem; margin-top: 4px; display: block;">
                        PDF, JPG, PNG veya DOC formatında dosya yükleyebilirsiniz. Birden fazla dosya seçebilirsiniz.
                    </small>
                    <div id="dosyaListesi" style="margin-top: 8px;"></div>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input 
                            type="checkbox" 
                            id="robotDegilim" 
                            required
                        >
                        <label for="robotDegilim" class="required">
                            Robot değilim
                        </label>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 30px;">
                    <button class="btn btn-primary" onclick="handleSave()" style="width: 100%;">Kaydet</button>
                </div>
            </div>
        </div>

        <!-- Success Screen -->
        <div id="successScreen" class="screen">
            <div class="card success-screen">
                <div class="success-icon">✓</div>
                <h2 style="margin-bottom: 20px; color: var(--text-dark);">Kayıt başarıyla tamamlandı</h2>
                <p style="color: var(--text-light); margin-bottom: 30px;">
                    Bilgileriniz kaydedildi.
                </p>
                <button class="btn btn-primary" onclick="handleNewRecord()">Yeni Kayıt</button>
            </div>
        </div>
    </div>

    <!-- KVKK Modal -->
    <div id="kvkkModal" class="modal-overlay" onclick="closeKVKKModal(event)">
        <div class="modal" onclick="event.stopPropagation();">
            <div class="modal-header">
                <h2>KVKK Aydınlatma Metni</h2>
                <button class="modal-close" onclick="closeKVKKModal(event)" aria-label="Kapat">&times;</button>
            </div>
            <div class="modal-content">
                <h3>1. Veri Sorumlusu</h3>
                <p>
                    Jetla Kurye olarak, 6698 sayılı Kişisel Verilerin Korunması Kanunu ("KVKK") uyarınca kişisel verileriniz 
                    işbu Aydınlatma Metni kapsamında işlenmektedir.
                </p>

                <h3>2. İşlenen Kişisel Veriler</h3>
                <p>
                    İş başvurusu sürecinde aşağıdaki kişisel verileriniz işlenmektedir:
                </p>
                <ul>
                    <li><strong>Kimlik Bilgileri:</strong> Ad, soyad, TC kimlik numarası</li>
                    <li><strong>İletişim Bilgileri:</strong> Telefon numarası</li>
                    <li><strong>Belgeler:</strong> Kimlik belgesi (ön ve arka), sağlık raporu, sabıka kaydı</li>
                    <li><strong>İmza:</strong> Dijital imza verisi</li>
                </ul>

                <h3>3. Kişisel Verilerin İşlenme Amacı</h3>
                <p>
                    Kişisel verileriniz aşağıdaki amaçlarla işlenmektedir:
                </p>
                <ul>
                    <li>İş başvuru sürecinin yürütülmesi</li>
                    <li>Yasal yükümlülüklerin yerine getirilmesi</li>
                    <li>Çalışan seçme ve yerleştirme süreçlerinin yönetimi</li>
                    <li>İş ilişkisinin kurulması ve yürütülmesi</li>
                </ul>

                <h3>4. Kişisel Verilerin Saklanması ve Güvenliği</h3>
                <p>
                    Kişisel verileriniz Google Drive platformunda güvenli bir şekilde saklanmaktadır. 
                    Her başvuru için kişi adına özel bir klasör oluşturulmakta ve tüm belgeler bu klasörde 
                    saklanmaktadır. Verileriniz, işleme amacının gerektirdiği süre boyunca ve yasal saklama 
                    süreleri dolana kadar saklanacaktır.
                </p>
                <p>
                    Kişisel verilerinizin güvenliğini sağlamak amacıyla teknik ve idari tedbirler alınmıştır. 
                    Verilerinize sadece yetkili personel erişebilmektedir.
                </p>

                <h3>5. Kişisel Verilerin Aktarımı</h3>
                <p>
                    Kişisel verileriniz, yukarıda belirtilen amaçlar doğrultusunda, yasal yükümlülüklerimiz 
                    çerçevesinde ve güvenlik önlemleri alınarak Google Drive platformuna aktarılmakta ve 
                    saklanmaktadır.
                </p>

                <h3>6. Kişisel Verilerin Saklanma Süresi</h3>
                <p>
                    Kişisel verileriniz, işleme amacının gerektirdiği süre boyunca ve Türk Ticaret Kanunu, 
                    Türk Borçlar Kanunu ve ilgili mevzuat hükümlerince belirlenen saklama süreleri boyunca 
                    saklanacaktır.
                </p>

                <h3>7. KVKK Kapsamındaki Haklarınız</h3>
                <p>
                    KVKK'nın 11. maddesi uyarınca aşağıdaki haklara sahipsiniz:
                </p>
                <ul>
                    <li>Kişisel verilerinizin işlenip işlenmediğini öğrenme</li>
                    <li>İşlenmişse buna ilişkin bilgi talep etme</li>
                    <li>İşlenme amacını ve amacına uygun kullanılıp kullanılmadığını öğrenme</li>
                    <li>Yurt içinde veya yurt dışında aktarıldığı üçüncü kişileri bilme</li>
                    <li>Eksik veya yanlış işlenmişse düzeltilmesini isteme</li>
                    <li>KVKK'da öngörülen şartlar çerçevesinde silinmesini veya yok edilmesini isteme</li>
                    <li>Düzeltme, silme, yok edilme işlemlerinin, kişisel verilerin aktarıldığı üçüncü kişilere bildirilmesini isteme</li>
                    <li>Münhasıran otomatik sistemler ile analiz edilmesi nedeniyle aleyhinize bir sonucun ortaya çıkmasına itiraz etme</li>
                    <li>Kanuna aykırı olarak işlenmesi sebebiyle zarara uğramanız hâlinde zararın giderilmesini talep etme</li>
                </ul>

                <h3>8. Başvuru Hakkı</h3>
                <p>
                    Yukarıda belirtilen haklarınızı kullanmak için, kimliğinizi tespit edici belgeler ile birlikte 
                    yazılı olarak şirketimize başvurabilirsiniz. Başvurularınız, talebin niteliğine göre en geç 
                    otuz gün içinde değerlendirilerek sonuçlandırılacaktır.
                </p>

                <h3>9. İletişim</h3>
                <p>
                    KVKK kapsamındaki haklarınızı kullanmak ve sorularınız için bizimle iletişime geçebilirsiniz:
                </p>
                <p>
                    <strong>Jetla Kurye</strong><br>
                    E-posta: jetlakurye.sosyal@gmail.com<br>
                    Telefon: 0544 949 50 08
                </p>

                <div class="modal-button-group">
                    <button class="btn btn-primary" id="kvkkModalOnayBtn" onclick="handleKVKKOnay()">
                        Okudum, Anladım ve Kabul Ediyorum
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- İş Sözleşmesi Modal -->
    <div id="sozlesmeModal" class="modal-overlay" onclick="closeSozlesmeModal(event)">
        <div class="modal" onclick="event.stopPropagation();">
            <div class="modal-header">
                <h2>Kurye Hizmet Sözleşmesi</h2>
                <button class="modal-close" id="sozlesmeModalClose" onclick="closeSozlesmeModal(event)" aria-label="Kapat">&times;</button>
            </div>
            <div class="modal-content">
                <h3>1. TARAFLAR:</h3>
                <p>
                    İşbu Hizmet Sözleşmesi ("Sözleşme") bir tarafta JETLA GLOBAL LOJİSTİK SANAYİ VE TİC. LTD. ŞTİ. 
                    ("Hizmet Alan" / "JETLA") ile diğer tarafta, serbest meslek erbabı, aşağıda bilgileri bulunan 
                    ("Esnaf Kurye" / "Kurye") arasında akdedilmiştir.
                </p>
                <p>
                    <strong>ADI SOYADI:</strong> …………………………………………………………………………………<br>
                    <strong>T.C. KİMLİK NO:</strong> …………………………………………………………………………………<br>
                    <strong>VERGİ KİMLİK NO:</strong> …………………………………………………………………………………<br>
                    <strong>TELEFON NO:</strong> …………………………………………………………………………………<br>
                    <strong>İKAMET ADRESİ:</strong> …………………………………………………………………………………
                </p>

                <h3>2. TANIMLAMALAR</h3>
                <p><strong>JETLA Uygulaması/Uygulama:</strong> Hizmet Alan tarafından geliştirilen; siparişlerin oluşturulduğu, yönlendirildiği, teslimat ve tahsilat kayıtlarının tutulduğu yazılım/uygulamayı,</p>
                <p><strong>Ürün(ler):</strong> Uygulama üzerinden satışa sunulan mal ve/veya hizmetleri,</p>
                <p><strong>Müşteri(ler):</strong> Uygulama üzerinden Ürün(ler)i sipariş eden kişileri,</p>
                <p><strong>İşletme/İşyeri:</strong> Ürün(ler)i satışa sunan ve siparişe hazırlayan restoran/işletmeleri,</p>
                <p><strong>Sipariş:</strong> Müşteri'nin Uygulama üzerinden oluşturduğu ve teslim edilmek üzere Kurye'ye yönlendirilen siparişi,</p>
                <p><strong>Kurye Hizmeti:</strong> Siparişlerin Kurye tarafından teslim alınarak Müşteri'ye ulaştırılması hizmetini,</p>
                <p><strong>Tahsilat:</strong> Siparişe ilişkin bedelin nakit veya kartlı olarak teslimat sırasında alınması ve sisteme işlenmesine aracılık edilmesini,</p>
                <p><strong>Emanet Tahsilat:</strong> Kurye tarafından alınan bedellerin Kurye geliri sayılmaksızın, İşletme/JETLA adına geçici olarak muhafaza edilmesini,</p>
                <p><strong>Hizmet Standartları:</strong> Müşteri memnuniyeti, mevzuata uygunluk, güvenlik ve kalite esasları kapsamında JETLA tarafından duyurulan kural ve kriterleri,</p>
                <p><strong>Ekipman ve Araçlar:</strong> Kurye Hizmetinde kullanılacak motosiklet, elektrikli bisiklet, scooter, otomobil vb. araçlar ile kask, korumalı ekipman, çanta, telefon vb. ekipmanları,</p>
                <p><strong>Vardiya:</strong> JETLA tarafından operasyonel ihtiyaçlara göre önceden duyurulan çalışma planı ve zaman aralığını,</p>

                <h3>3. SÖZLEŞMENİN KONUSU, NİTELİĞİ VE SORUMLULUK</h3>
                <p><strong>3.1</strong> Sözleşme'nin konusu; Kurye tarafından işbu Sözleşme'de belirlenen şekilde Kurye Hizmeti sunulması ve teslimat sırasında Tahsilat'a aracılık edilmesi; bu hizmet karşılığında Hizmet Alan'ın, Sözleşme'de yer alan usule göre ödeme yapması ile Tarafların diğer hak ve yükümlülüklerinin belirlenmesidir.</p>
                <p><strong>3.2</strong> Kurye, çalışma hayatını düzenleyen tüm yasal yükümlülüklerini bizzat yerine getirecektir. Kurye, Sözleşme konusu işle ilgili olarak doğacak her türlü vergisel yükümlülüğün kendisine ait olduğunu kabul eder. Bu kapsamda vergi ve sosyal güvenlik mevzuatından kaynaklanan tüm yükümlülüklerin yerine getirilmesinden de bizzat sorumludur. Hizmet Alan, Kurye'den bu yükümlülüklere ilişkin belgeleri talep edebilir.</p>
                <p><strong>3.3</strong> Şüpheye mahal vermeksizin, işbu Sözleşme ile Taraflar arasında bir işçi-işveren ilişkisi tesis edilmemekte olup, Kurye bağımsız hizmet sağlayıcı olarak hizmet vermektedir.</p>
                <p><strong>3.4</strong> Satılan Ürün(ler)in mülkiyeti, içerik/ayıp, iade-değişim, garanti, vergi ve harçlar ile müşteriye karşı satıştan doğan sorumluluklar ilgili İşletme'ye aittir. Kurye satıcı değildir; yalnızca taşıma ve Tahsilat'a aracılık hizmeti sunar.</p>
                <p><strong>3.5</strong> Kurye'nin sorumluluğu, yalnızca kendi kusurundan kaynaklanan doğrudan zararlarla sınırlı olup, ilgili teslimata ait kurye hizmet bedelini aşamaz. Dolaylı zararlar, kar kaybı ve itibar kaybı taleplerinden sorumluluk kabul edilmez.</p>
                <p><strong>3.6</strong> Kurye, trafik kurallarına aykırı araç kullanması durumunda trafik para cezasını kendisi ödeyeceğini; herhangi bir ad altında bu cezanın Hizmet Alan'a yükletilemeyeceğini kabul eder.</p>
                <p><strong>3.7</strong> Sözleşme niteliği gereği Kurye'ye üçüncü kişilerle çalışma konusunda genel bir sınırlama getirmez. Ancak işbu Sözleşme'de yer alan vardiya/operasyon hükümleri saklıdır.</p>

                <h3>4. TARAFLARIN HAK VE YÜKÜMLÜLÜKLERİ</h3>
                <p><strong>4.1</strong> Kurye;</p>
                <ul>
                    <li>Kurye Hizmeti'ni gerçekleştirecek yeterli bilgi ve tecrübeye sahip olduğunu,</li>
                    <li>Kullanacağı araçlara uygun ehliyet ve sair belgelere sahip olduğunu; bu belgelerde değişiklik olması halinde JETLA'yı derhal bilgilendireceğini,</li>
                    <li>Müşteri ve İşletmeler ile iletişiminde saygılı, profesyonel davranacağını; hakaret/tehdit/uygunsuz davranışlarda bulunmayacağını kabul eder.</li>
                </ul>
                <p><strong>4.2</strong> Kurye, İşletme'den teslim aldığı Sipariş'i Uygulama üzerinden oluşturulan rota ve talimatlara uygun şekilde Müşteri'ye teslim edecektir. Teslimatın tamamlandığı ve varsa Tahsilat işlemlerinin gerçekleştiği, Kurye tarafından Uygulama üzerinden bildirilecektir.</p>
                <p><strong>4.3</strong> Kurye, Kurye Hizmeti'ni yerine getirirken ilgili tüm mevzuata, trafik kurallarına, JETLA'nın duyurduğu Hizmet Standartları'na ve Ek-1'de yer alan Güvenliğe İlişkin Temel Kurallar'a uygun davranacaktır.</p>
                <p><strong>4.4</strong> Kurye, JETLA tarafından zorunlu tutulması halinde fiziki ve/veya çevrimiçi bilgilendirme/eğitimlere makul ölçüde katılım sağlayacaktır.</p>
                <p><strong>4.5</strong> Kurye, teslimatlar sırasında kullanmış olduğu mobil cihazın JETLA sistemi ile uyumlu teknik altyapıya sahip olacağını kabul eder.</p>
                <p><strong>4.6</strong> Kurye, teslimat süresince mobil cihazın GPS (konum) ayarını açık tutacağını kabul eder. GPS'in kasten kapatılması halinde JETLA uyarı ve/veya geçici sistem kısıtı uygulayabilir; tekrarında fesih hakkı saklıdır.</p>
                <p><strong>4.7</strong> Kurye, WhatsApp/Telegram vb. iletişim kanallarında JETLA, İşletmeler, Müşteriler ve diğer kuryeler hakkında uygunsuz, itibar zedeleyici, provoke edici paylaşımlarda bulunmayacağını kabul eder. İhlalde kademeli yaptırım (uyarı–askı–fesih) uygulanabilir.</p>
                <p><strong>4.8</strong> Kurye, operasyonel ihtiyaçlara göre önceden duyurulan vardiya saatlerine uymayı; sipariş yoğunluğu, hava koşulları ve operasyonel gereklilikler sebebiyle vardiyanın makul sürelerle erken başlayabileceğini veya uzatılabileceğini kabul eder. Bu hüküm sabit çalışma saati garantisi vermez ve işçi-işveren ilişkisi oluşturmaz.</p>
                <p><strong>4.9</strong> Kurye, Sözleşme kapsamında öğrendiği işleri, iş sırlarını, meslek sırlarını ve müşteri/işletme bilgilerini gizli tutmakla yükümlüdür. JETLA'nın yazılı izni olmaksızın operasyon içi yazışmalar, ekran görüntüleri, sipariş detayları sosyal medyada paylaşılamaz.</p>

                <h3>5. TAHSİLATA ARACILIK, NAKİT TAŞIMA, TEMİNAT VE AVANS</h3>
                <p><strong>5.1</strong> POS cihazı ve/veya kartlı tahsilat süreçlerinde oluşabilecek banka komisyonları, chargeback/itiraz, banka kesintisi ve gecikmeler ilgili İşletme'nin sorumluluğundadır. POS cihazının elektronik/yazılımsal arızalarından Kurye sorumlu değildir.</p>
                <p><strong>5.2</strong> Kurye, teslimatlar sırasında İşletmelere ait nakit bedelleri geçici olarak üzerinde taşıyacağını kabul eder. Bu kapsamda 5.000 TL veya JETLA tarafından belirlenen tutar, emanet/teminat mahiyetinde geçici olarak JETLA tarafından alıkonulabilir.</p>
                <p><strong>5.3</strong> Teminat bedeli; Kurye'nin nakit iade yükümlülüklerini eksiksiz yerine getirmesi halinde sözleşmenin sona ermesi durumunda en geç 15 (on beş) gün içinde veya bir sonraki hak ediş/ödeme döneminde Kurye'ye iade edilir.</p>
                <p><strong>5.4</strong> Tahsil edilen nakdin eksik teslim edilmesi, geciktirilmesi veya hiç teslim edilmemesi halinde JETLA; alıkonulan teminat bedelinden ve Kurye'nin doğmuş/doğacak hak edişlerinden tek taraflı mahsup yapma hakkına sahiptir. Mahsup sonrası bakiye için yasal haklar saklıdır.</p>
                <p><strong>5.5</strong> JETLA tarafından Kurye'ye operasyonel gereklilikler kapsamında verilen bedeller avans niteliğindedir. Bu tutarlar hak ediş ve faturalandırma aşamasında otomatik olarak mahsup edilir. Kurye, mahsup nedeniyle ödenecek tutarın azalmasını ihtilaf konusu yapmayacağını kabul eder.</p>

                <h3>6. ÖDEME VE KURYE HİZMET BEDELİ HESAPLAMA</h3>
                <p><strong>6.1</strong> Kurye, vermiş olduğu hizmet karşılığı ücrete hak kazanır. Kurye'nin hak etmiş olduğu sabit bir ücret bulunmamaktadır.</p>
                <p><strong>6.2</strong> Kurye hizmet bedelinin hesaplaması; paket başı ücret, mesafe (km) ücreti ve varsa ek hizmet bedelleri esas alınarak JETLA tarafından sistem üzerinden ilan edilen tarifeye göre yapılır. Hak edişler sistem üzerinden hesaplanır.</p>
                <p><strong>6.3</strong> JETLA, tarifeleri ve hizmet bedeli hesaplama esaslarını operasyonel ihtiyaçlara göre değiştirebilir. Değişiklikler Uygulama, e-posta, SMS ve/veya WhatsApp ile bildirilebilir. Kurye, bildirimi takip etmekle yükümlüdür.</p>
                <p><strong>6.4</strong> Ödeme periyodu başlangıçta 15 (on beş) günde bir olmakla birlikte JETLA tarafından değiştirilebilir. Örneğin: 1 hafta çalışma, takip eden hafta Pazartesi/Salı fatura kesimi, Cuma ödeme modeli uygulanabilir.</p>
                <p><strong>6.5</strong> Kurye, hak edişine ilişkin faturayı JETLA'ya tebliğ eder. Ödemeler, mahsup ve avans düşümleri yapıldıktan sonra, JETLA'nın belirlediği ödeme planına göre Kurye'nin banka hesabına yapılır.</p>
                <p>
                    <strong>Hesap Adı:</strong> …………………………………………………………………………………<br>
                    <strong>IBAN No:</strong> …………………………………………………………………………………
                </p>

                <h3>7. SÖZLEŞME SÜRESİ VE FESİH</h3>
                <p><strong>7.1</strong> Sözleşme imza tarihinden itibaren 1 (bir) yıl boyunca yürürlükte kalacak ve taraflardan biri en az 15 (on beş) gün önce yazılı bildirimde bulunmadıkça aynı süre ile uzamış sayılacaktır.</p>
                <p><strong>7.2</strong> Taraflar, Sözleşme süresince herhangi bir zamanda 15 (on beş) gün önceden yazılı bildirimde bulunmak kaydıyla sebep göstermeksizin ve tazminat ödemeksizin Sözleşme'yi sona erdirebilir.</p>
                <p><strong>7.3</strong> JETLA; ağır güvenlik ihlali, kasti zarar, emanet tahsilatın zimmete geçirilmesi/teslim edilmemesi, gizlilik/KVKK ihlali, marka itibarını ciddi şekilde zedeleyen davranışlar ve mevzuata aykırılık hallerinde Sözleşme'yi derhal feshedebilir.</p>
                <p><strong>7.4</strong> Kurye, Sözleşme süresince JETLA aracılığıyla çalıştığı işletmelerle JETLA'yı devre dışı bırakarak doğrudan ticari ilişki kurmamayı kabul eder. Bu hüküm Kuryenin diğer platformlarda çalışmasını engellemez.</p>

                <h3>8. MÜCBİR SEBEP</h3>
                <p>
                    Deprem, yangın, sel gibi doğal afetler; savaş, salgın hastalık, idari makam kararları, grev/lokavt, 
                    toplumsal olaylar; trafik/hava koşulları ve teknik arızalar gibi Taraflarca öngörülemeyen ve engellenemeyen 
                    sebeplerin varlığı halinde yükümlülükler etkilendiği ölçüde ifa edilemezse Taraflar sorumlu tutulamaz.
                </p>

                <h3>9. DİĞER HÜKÜMLER</h3>
                <p><strong>9.1</strong> Uyuşmazlıkların çözüm yeri Antalya (Merkez) Mahkemeleri ve İcra Müdürlükleri'dir.</p>
                <p><strong>9.2</strong> Bildirimler Tarafların sözleşmede belirttiği adreslere yapılır. Adres değişikliği yazılı bildirilmediği sürece eski adrese yapılan bildirimler geçerli sayılır.</p>
                <p><strong>9.3</strong> Kurye, JETLA'nın yazılı izni olmaksızın işbu Sözleşme'den doğan hak, yükümlülük ve alacaklarını üçüncü kişilere devredemez.</p>
                <p><strong>9.4</strong> İşbu Sözleşme, değişen şartlara ve hukuki düzenlemelere uyum amacıyla JETLA tarafından güncellenebilir. Güncellemeler Uygulama/e-posta/SMS/WhatsApp ile bildirilebilir. Kurye, bildirimi takip eder; bildirimi takiben makul süre içinde yazılı itiraz edilmemesi halinde güncellemelerin kabul edilmiş sayılacağını kabul eder.</p>
                <p><strong>9.5</strong> Kurye; JETLA tarafından yürütülen tanıtım/bilgilendirme faaliyetleri kapsamında çalışma esnasında çekilen fotoğraf ve videolarda yer alabileceğini; görüntü/ses verilerinin JETLA web sitesi ve sosyal medya hesaplarında tanıtım amacıyla kullanılmasına izin verdiğini kabul eder. Bu kullanım kişilik haklarını zedeleyici şekilde yapılamaz.</p>
                <p>
                    İşbu Sözleşme, Tarafların karşılıklı mutabakatı ile 2 (iki) nüsha olarak ……………… tarihinde imzalanmıştır. 
                    Ek-1 ve Ek-2 işbu Sözleşme'nin ayrılmaz parçasıdır.
                </p>

                <div class="modal-button-group">
                    <button class="btn btn-primary" id="sozlesmeModalOnayBtn" onclick="handleSozlesmeOnay()">
                        Okudum, Anladım ve Kabul Ediyorum
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        Jetla iç kullanım — doküman kayıt ekranı
    </div>

    <script>

        // File to Base64 converter
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => {
                    const base64String = reader.result.split(',')[1]; // Remove data:...;base64, prefix
                    resolve({
                        name: file.name,
                        data: base64String,
                        mimeType: file.type,
                        size: file.size
                    });
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // Form validation and save
        async function handleSave() {
            const formError = document.getElementById('formError');
            formError.classList.remove('active');
            formError.textContent = '';
            
            const adSoyad = document.getElementById('adSoyad').value.trim();
            const telefon = document.getElementById('telefon').value.trim();
            const acilTelefon = document.getElementById('acilTelefon').value.trim();
            const kvkkOnay = document.getElementById('kvkkOnay').checked;
            const sozlesmeOnay = document.getElementById('sozlesmeOnay').checked;
            const dosyaInput = document.getElementById('dosyaYukle');
            const dosyalar = dosyaInput.files;
            
            const errors = [];
            
            if (!adSoyad) {
                errors.push('Ad Soyad gereklidir');
            }
            
            if (!telefon || !/^5[0-9]{9}$/.test(telefon)) {
                errors.push('Telefon numarası 5 ile başlayan 10 haneli olmalıdır (0 olmadan)');
            }
            
            if (!acilTelefon || !/^5[0-9]{9}$/.test(acilTelefon)) {
                errors.push('Acil durumlar için telefon numarası 5 ile başlayan 10 haneli olmalıdır (0 olmadan)');
            }
            
            if (!dosyalar || dosyalar.length === 0) {
                errors.push('En az bir dosya yüklenmelidir');
            }
            
            if (!kvkkOnay) {
                errors.push('KVKK onayı gereklidir');
            }
            
            if (!sozlesmeOnay) {
                errors.push('Kurye Hizmet Sözleşmesi onayı gereklidir');
            }
            
            const robotDegilim = document.getElementById('robotDegilim').checked;
            if (!robotDegilim) {
                errors.push('Robot değilim kontrolünü işaretlemeniz gereklidir');
            }
            
            if (errors.length > 0) {
                formError.textContent = errors.join('. ');
                formError.classList.add('active');
                return;
            }
            
            try {
                const saveButton = document.querySelector('.btn-primary[onclick="handleSave()"]');
                const originalText = saveButton.textContent;
                saveButton.disabled = true;
                saveButton.textContent = 'Kaydediliyor...';
                
                // Dosyaları base64'e çevir
                const dosyaListesi = [];
                for (let i = 0; i < dosyalar.length; i++) {
                    const dosyaBilgisi = await fileToBase64(dosyalar[i]);
                    dosyaListesi.push(dosyaBilgisi);
                }
                
                const payload = {
                    formType: 'dokumanlar',
                    adSoyad: adSoyad,
                    telefon: telefon,
                    acilTelefon: acilTelefon,
                    kvkkOnay: kvkkOnay,
                    sozlesmeOnay: sozlesmeOnay,
                    dosyalar: dosyaListesi,
                    timestampISO: new Date().toISOString()
                };
                
                const payloadString = JSON.stringify(payload);
                console.log('Kayıt gönderiliyor:', { ...payload, dosyalar: `[${dosyaListesi.length} dosya]` });
                
                const WEB_APP_URL = (typeof CONFIG !== 'undefined' && CONFIG.DOKUMANLAR_WEB_APP_URL) 
                    ? CONFIG.DOKUMANLAR_WEB_APP_URL 
                    : null;
                
                if (!WEB_APP_URL) {
                    formError.textContent = 'HATA: Google Apps Script URL\'si ayarlanmamış. Lütfen config.js dosyasında DOKUMANLAR_WEB_APP_URL değerini ayarlayın.';
                    formError.classList.add('active');
                    saveButton.disabled = false;
                    saveButton.textContent = originalText;
                    return;
                }
                
                // Gizli iframe oluştur
                let iframe = document.getElementById('hiddenIframe');
                if (!iframe) {
                    iframe = document.createElement('iframe');
                    iframe.id = 'hiddenIframe';
                    iframe.name = 'hiddenIframe';
                    iframe.style.display = 'none';
                    iframe.style.width = '0';
                    iframe.style.height = '0';
                    iframe.style.border = 'none';
                    document.body.appendChild(iframe);
                }
                
                // Dosya boyutu kontrolü (her dosya max 5MB, toplam max 25MB)
                let totalSize = 0;
                for (let i = 0; i < dosyaListesi.length; i++) {
                    totalSize += dosyaListesi[i].size || 0;
                }
                if (totalSize > 25 * 1024 * 1024) {
                    formError.textContent = 'Toplam dosya boyutu 25MB\'dan fazla olamaz. Lütfen daha küçük dosyalar seçin.';
                    formError.classList.add('active');
                    saveButton.disabled = false;
                    saveButton.textContent = originalText;
                    return;
                }
                
                // Payload boyutu çok büyükse uyar
                if (payloadString.length > 5000000) { // 5MB base64 veri yaklaşık limit
                    formError.textContent = 'Dosyalar çok büyük. Lütfen daha küçük dosyalar seçin veya dosya sayısını azaltın.';
                    formError.classList.add('active');
                    saveButton.disabled = false;
                    saveButton.textContent = originalText;
                    return;
                }
                
                // Form oluştur - encoding önemli
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = WEB_APP_URL;
                form.target = 'hiddenIframe';
                form.enctype = 'application/x-www-form-urlencoded';
                form.style.display = 'none';
                
                const dataInput = document.createElement('input');
                dataInput.type = 'hidden';
                dataInput.name = 'data';
                dataInput.value = payloadString;
                form.appendChild(dataInput);
                document.body.appendChild(form);
                
                // iframe yüklendiğinde kontrol et
                let checkCount = 0;
                const maxChecks = 40; // Dosya yükleme daha uzun sürebilir
                
                const checkInterval = setInterval(function() {
                    checkCount++;
                    try {
                        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                        if (iframeDoc && iframeDoc.body) {
                            const responseText = iframeDoc.body.innerText || iframeDoc.body.textContent || '';
                            if (responseText && responseText.trim()) {
                                try {
                                    const result = JSON.parse(responseText);
                                    console.log('Response:', result);
                                    if (result.success || result.result === 'success') {
                                        clearInterval(checkInterval);
                                        form.remove();
                                        showSuccessScreen();
                                        saveButton.disabled = false;
                                        saveButton.textContent = originalText;
                                        return;
                                    } else if (result.result === 'error') {
                                        clearInterval(checkInterval);
                                        form.remove();
                                        formError.textContent = 'Hata: ' + (result.message || 'Bilinmeyen hata');
                                        formError.classList.add('active');
                                        saveButton.disabled = false;
                                        saveButton.textContent = originalText;
                                        return;
                                    }
                                } catch (parseError) {
                                    console.log('JSON parse hatası, devam ediliyor');
                                }
                            }
                        }
                    } catch (e) {
                        // Cross-origin hatası normal
                    }
                    
                    if (checkCount >= maxChecks) {
                        clearInterval(checkInterval);
                        form.remove();
                        showSuccessScreen();
                        saveButton.disabled = false;
                        saveButton.textContent = originalText;
                    }
                }, 500);
                
                form.submit();
                
            } catch (error) {
                console.error('Kayıt hatası:', error);
                formError.textContent = 'Kayıt hatası: ' + error.message + '. Lütfen konsolu kontrol edin.';
                formError.classList.add('active');
                
                const saveButton = document.querySelector('.btn-primary[onclick="handleSave()"]');
                saveButton.disabled = false;
                saveButton.textContent = 'Kaydet';
            }
        }

        function showSuccessScreen() {
            document.getElementById('formScreen').classList.remove('active');
            document.getElementById('successScreen').classList.add('active');
        }
        

        function handleNewRecord() {
            document.getElementById('successScreen').classList.remove('active');
            document.getElementById('formScreen').classList.add('active');
            
            document.getElementById('adSoyad').value = '';
            document.getElementById('telefon').value = '';
            document.getElementById('acilTelefon').value = '';
            document.getElementById('dosyaYukle').value = '';
            document.getElementById('dosyaListesi').innerHTML = '';
            
            const kvkkOnay = document.getElementById('kvkkOnay');
            kvkkOnay.checked = false;
            kvkkOnay.disabled = true;
            
            const sozlesmeOnay = document.getElementById('sozlesmeOnay');
            sozlesmeOnay.checked = false;
            sozlesmeOnay.disabled = true;
            
            const robotDegilim = document.getElementById('robotDegilim');
            robotDegilim.checked = false;
            
            const formError = document.getElementById('formError');
            formError.classList.remove('active');
        }

        // Dosya seçildiğinde listeyi göster
        function updateFileList() {
            const dosyaInput = document.getElementById('dosyaYukle');
            const dosyaListesi = document.getElementById('dosyaListesi');
            const dosyalar = dosyaInput.files;
            
            if (dosyalar.length === 0) {
                dosyaListesi.innerHTML = '';
                return;
            }
            
            let html = '<div style="margin-top: 8px; padding: 8px; background-color: var(--light-gray); border-radius: 6px;">';
            html += '<strong style="font-size: 0.85rem; color: var(--text-dark);">Seçilen dosyalar:</strong><ul style="margin: 8px 0 0 0; padding-left: 20px;">';
            
            for (let i = 0; i < dosyalar.length; i++) {
                const dosya = dosyalar[i];
                const dosyaBoyutu = (dosya.size / 1024).toFixed(2) + ' KB';
                html += `<li style="font-size: 0.85rem; color: var(--text-light); margin-bottom: 4px;">${dosya.name} (${dosyaBoyutu})</li>`;
            }
            
            html += '</ul></div>';
            dosyaListesi.innerHTML = html;
        }

        // KVKK Modal functions
        function openKVKKModal() {
            const modal = document.getElementById('kvkkModal');
            const closeButton = modal.querySelector('.modal-close');
            const kvkkOnay = document.getElementById('kvkkOnay');
            
            // Disable close button if checkbox not checked
            if (!kvkkOnay.checked) {
                closeButton.classList.add('modal-close-disabled');
                closeButton.disabled = true;
                closeButton.style.pointerEvents = 'none';
            } else {
                closeButton.classList.remove('modal-close-disabled');
                closeButton.disabled = false;
                closeButton.style.pointerEvents = 'auto';
            }
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function handleKVKKOnay() {
            const kvkkOnay = document.getElementById('kvkkOnay');
            const closeButton = document.getElementById('kvkkModal').querySelector('.modal-close');
            
            // Enable and check the form checkbox
            kvkkOnay.disabled = false;
            kvkkOnay.checked = true;
            
            // Enable close button
            closeButton.classList.remove('modal-close-disabled');
            closeButton.disabled = false;
            closeButton.style.pointerEvents = 'auto';
            
            // Close modal
            closeKVKKModal();
        }

        function closeKVKKModal(event) {
            const kvkkOnay = document.getElementById('kvkkOnay');
            const closeButton = document.getElementById('kvkkModal').querySelector('.modal-close');
            
            // Only allow closing if checkbox is checked
            if (!kvkkOnay.checked) {
                if (event) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                return false;
            }
            
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            document.getElementById('kvkkModal').classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        }

        // İş Sözleşmesi Modal functions
        function openSozlesmeModal() {
            const modal = document.getElementById('sozlesmeModal');
            const closeButton = document.getElementById('sozlesmeModalClose');
            const sozlesmeOnay = document.getElementById('sozlesmeOnay');
            
            // If form checkbox is not checked, disable close button
            if (!sozlesmeOnay.checked) {
                closeButton.classList.add('modal-close-disabled');
                closeButton.disabled = true;
                closeButton.style.pointerEvents = 'none';
            } else {
                closeButton.classList.remove('modal-close-disabled');
                closeButton.disabled = false;
                closeButton.style.pointerEvents = 'auto';
            }
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
            
            // Scroll to top of modal content
            const modalContent = modal.querySelector('.modal-content');
            if (modalContent) {
                modalContent.scrollTop = 0;
            }
        }

        function handleSozlesmeOnay() {
            const sozlesmeOnay = document.getElementById('sozlesmeOnay');
            const closeButton = document.getElementById('sozlesmeModalClose');
            
            // Enable and check the form checkbox
            sozlesmeOnay.disabled = false;
            sozlesmeOnay.checked = true;
            
            // Enable close button
            closeButton.classList.remove('modal-close-disabled');
            closeButton.disabled = false;
            closeButton.style.pointerEvents = 'auto';
            
            // Close modal
            closeSozlesmeModal();
        }

        function closeSozlesmeModal(event) {
            const sozlesmeOnay = document.getElementById('sozlesmeOnay');
            
            // Only allow closing if checkbox is checked
            if (!sozlesmeOnay.checked) {
                if (event) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                return false;
            }
            
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            document.getElementById('sozlesmeModal').classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Disable both checkboxes initially
            const kvkkOnay = document.getElementById('kvkkOnay');
            const sozlesmeOnay = document.getElementById('sozlesmeOnay');
            if (kvkkOnay) {
                kvkkOnay.disabled = true;
            }
            if (sozlesmeOnay) {
                sozlesmeOnay.disabled = true;
            }
            
            // Dosya seçildiğinde listeyi güncelle
            const dosyaInput = document.getElementById('dosyaYukle');
            if (dosyaInput) {
                dosyaInput.addEventListener('change', updateFileList);
            }
            
            // Telefon input validation
            const telefonInput = document.getElementById('telefon');
            telefonInput.addEventListener('input', function(e) {
                // Sadece rakam ve başında 0 varsa kaldır
                let value = e.target.value.replace(/[^0-9]/g, '');
                if (value.startsWith('0')) {
                    value = value.substring(1);
                }
                if (value.length > 10) {
                    value = value.substring(0, 10);
                }
                e.target.value = value;
            });
            
            // Acil telefon input validation
            const acilTelefonInput = document.getElementById('acilTelefon');
            acilTelefonInput.addEventListener('input', function(e) {
                // Sadece rakam ve başında 0 varsa kaldır
                let value = e.target.value.replace(/[^0-9]/g, '');
                if (value.startsWith('0')) {
                    value = value.substring(1);
                }
                if (value.length > 10) {
                    value = value.substring(0, 10);
                }
                e.target.value = value;
            });
            
            // Close modal on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const kvkkModal = document.getElementById('kvkkModal');
                    const sozlesmeModal = document.getElementById('sozlesmeModal');
                    
                    if (kvkkModal.classList.contains('active')) {
                        closeKVKKModal();
                    } else if (sozlesmeModal.classList.contains('active')) {
                        const modalOnay = document.getElementById('sozlesmeModalOnay');
                        if (modalOnay.checked) {
                            closeSozlesmeModal();
                        }
                    }
                }
            });
            
        });
    </script>
</body>
</html>

